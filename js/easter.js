var Egame=new function(){var e,t,n=0;this.setup=function(a){n=0,e=a,$("body").append('<div id="egame-back">'),$("body").append('<div class="egg-score">0</div>'),t=window.setInterval(function(){var a=$('<div class="egame-egg-parent"><img class="egame-err-pic" src="'+baseUrl+"img/eggs/e"+Math.ceil(19*Math.random())+'.png"></div>');a.css({top:Math.floor(Math.random()*$(window).height())-40,left:Math.floor(Math.random()*$(window).width())-40});var o=a.find(".egame-err-pic").css({width:"auto",height:Math.floor(100*Math.random()+50)});o.on("click",function(){++n,$(".egg-score").text(n),$(this).fadeOut(100,function(){$(this).parent().remove()}),n>=16&&(window.clearInterval(t),$(".egame-egg-parent").fadeOut(function(){$(".egame-egg-parent").remove()}),$("#egame-back").fadeOut(function(){$("#egame-back").remove()}),$(".egg-score").fadeOut(function(){$(".egg-score").remove()}),Easter.next(e))}),window.setTimeout(function(){a.fadeOut(100,function(){$(this).remove()})},Math.floor(1e3*Math.random())+1e3),$("body").append(a),a.hide().fadeIn("slow")},1e3)},this.complete=function(){},this.hint="Go get the eggs!"},Easter=new function(){function e(e){var t=navigator.userAgent;t+=navigator.platform,t+=navigator.appVersion;for(var n=0;5>n&&btoa(unescape(encodeURIComponent(t+n)))!=e;++n);return e=n,{level:n}}function t(e){var t=navigator.userAgent;return t+=navigator.platform,t+=navigator.appVersion,t+=e.level,btoa(unescape(encodeURIComponent(t)))}function n(e){r||(r={}),r.level=e,cookies.set("gsession5_id",t(r),1e3),$("#level-num").text(e+1),$("#easter-hint").text(d[e].hint)}function a(){return r.level}function o(){var e=a(),t=$('<li class="easter">Level <span id="level-num">'+(e+1)+'</span> of <a href="'+baseUrl+'easter/" class="btn btn-blue">The Easter Egg Hunt</a></li><li><a class="btn easter-quit" href="javascript:Easter.destroy()" onclick="return confirm(\'Are you sure you want to quit the game?\');">Quit</a></li>');$(".navbar ul").append(t.hide().fadeIn()),$(".navbar").append($('<div class="easter-hint-box">Level hint: <span id="easter-hint">'+d[e].hint+"</span></div>").hide().fadeIn()),$(".navbar li").css("display","")}function i(){var e=a(),t=++e;d[t]?(n(t),u=Math.random().toString(36).substr(2),d[t].setup(u)):(cookies.remove("gsession5_id"),window.location.hash="16")}var s=cookies.get("gsession5_id"),r=null;s&&(r=e(s));var c={setup:function(){},complete:function(){},hint:"No hint available for this level."},d=[E2Egg||c,EEvent||c,EPuzz||c,Egame||c];this.init=function(){if(r){var e;for(e=0;e<r.level;++e)d[e].complete();o(),d[e]&&(u=Math.random().toString(36).substr(2),d[e].setup(u))}};var u;this.start=function(){if(!r){var e=$('<div class="boom-box"></div>');e.css({top:0,right:0}),$("body").append(e),e.animate({top:0,width:"100%",height:"100%",opacity:.5},800,function(){e.animate({opacity:1},100,function(){e.fadeOut("slow")})}),n(0),u=Math.random().toString(36).substr(2),d[0].setup(u),o()}},this.next=function(e){if(e==u){var t=$('<div class="boom-box"></div>'),n=$(".easter"),a=n.offset();t.offset({top:a.top-$(document).scrollTop(),left:a.left}),t.width(n.width()),t.height(n.height()),$("body").append(t),t.animate({left:0,top:0,width:"100%",height:"100%",opacity:.6},800,function(){t.animate({opacity:1},100,function(){t.fadeOut("slow",function(){i()})})})}},this.destroy=function(){cookies.remove("gsession5_id"),window.location.href=""}};$(document).ready(function(){Easter.init()});