function hashChange(){var t=window.location.hash,e=document.title,i=" | ";closeFrozen(null,function(){freezeBrick(t.substr(1))});var n=e.indexOf(i);if(-1!==n&&(e=e.substr(0,n)),t){if("#16"==t)return void felicity16();var s=$('.brick[data-href="'+t.substr(1)+'"]');if(s.length){var o=t.substr(1);o=o.charAt(0).toUpperCase()+o.slice(1),document.title=e+i+o}else document.title=e;scrollToContent()}}function scrollToContent(){$("body,html").animate({scrollTop:$(window).height()-$(".navbar").outerHeight()},1e3)}function spashScroll(){var t=$(document).scrollTop()/$(window).height();t>1&&(t=1);var e=.2*t+.15;e>1&&(e=1),$(".navbar").css("backgroundColor","rgba( 100, 100, 100, "+e+" )"),t?$("#splash-title #down-arrow").css("animation",""):$("#splash-title #down-arrow").css("animation","glow 2s linear infinite");var i=1-1.25*t;i=0>i?0:i,$("#down-arrow-wrap").css("opacity",i)}function freezeBrick(t){var e=$('.brick[data-href="'+t+'"]');if(e.length){var i=e.outerHeight(),n=e.outerWidth(),s=e.position();$(".brick").not(e).addClass("not-frozen"),e.addClass("frozen hover").css("position","absolute"),e.css({height:i+"px",width:n+"px",top:s.top,left:s.left}).stop().animate({height:"100%",width:"100%",top:0,left:0},function(){var t=$(this),e=t.height(),i=t.css("height","auto").height();switch(e>=i?t.css({height:e}):t.css("height",e+"px").stop().animate({height:i+"px"},function(){$(this).css("height","auto")}),t.data("href")){case"gallery":Gallery.view();break;case"team":case"sponsors":case"nights":case"events":Lazy.load(t.data("href"))}})}}function closeFrozen(t,e){var i=$(".frozen");if("gallery"==i.data("href")&&Gallery.close(),0!=i.length){$(".brick").not(this).removeClass("not-frozen");var n=i.data();i.stop().animate({top:n.top,left:n.left,height:n.height,width:n.width},function(){i.css({position:"",top:"",left:"",height:"",width:""}).removeClass("frozen hover"),"function"==typeof e&&e(),$(window).mousemove()})}else"function"==typeof e&&e();t&&t.stopPropagation(),$(".event-active .desc").stop().fadeOut(),$(".event-active .event-sub-list").stop().fadeOut(function(){$(".event-sub-list").css("left","auto")}),$(".event-active").removeClass("event-active")}function felicity16(){function t(t,e){t.animate({"stroke-dashoffset":0},2e3,void 0,function(){i.finishAnim(e)})}function e(e){i.addLevel(),e.selectAll("rect, path").forEach(function(t){var e=t.getTotalLength();t.attr({"stroke-dasharray":e,"stroke-dashoffset":e})}),n.append(e),n.selectAll("#ground, #sky, #sun").forEach(function(e){i.append(function(i){t(e,i)})}),i.addLevel(),n.selectAll(".sunstroke").forEach(function(e){i.append(function(i){t(e,i)})});var s=["sun","ground","sky"],o=["yellow","green","skyblue"];i.append(function(t){function e(){a--,0===a&&i.finishAnim(t)}for(var a=0,c=0;c<s.length;++c){++a;var r=n.select("#"+s[c]);r.attr({fill:"white"}).animate({fill:o[c],stroke:"black"},2e3,void 0,e)}},1e3),i.addLevel(),i.append(function(t){var e=$("<div>Felicity '16</div>");$("body").append(e),e.css({position:"fixed",top:300,left:50,fontSize:130,textShadow:"0 0 5px black"}).hide().fadeIn(function(){i.finishAnim(t)})},500),i.addLevel(),i.append(function(t){var e=$("<div>Coming soon...</div>");$("body").append(e),e.css({position:"fixed",top:500,left:150,fontSize:40,textShadow:"0 0 5px black"}).hide().fadeIn(function(){i.finishAnim(t)})},500),i.append(function(t){var e=$('<p>Meanwhile, you can <a style="text-decoration:underline" href="'+baseUrl+"\">visit last year's website.</a></p>");$("body").append(e),e.css({position:"fixed",top:550,left:150}).hide().fadeIn(function(){i.finishAnim(t)})},500),i.execute()}var i=new Queue;i.append(function(t){$(".after-splash-content").fadeOut(function(){i.finishAnim(t)})}),i.addLevel(),i.append(function(t){$("#splash-title").fadeOut(function(){i.finishAnim(t)})},800),i.addLevel(),i.append(function(t){$("body").css("backgroundColor","white"),$("#stars").fadeOut(2e3,function(){i.finishAnim(t)})},800);var n=new Snap(document.getElementById("svg-container"));Snap.load(baseUrl+"img/landscape.svg",e)}$(document).ready(function(){$("#down-arrow").on("click",function(){"#content"==window.location.hash&&scrollToContent()}),$(window).on("hashchange",hashChange).on("scroll",spashScroll),$(".brick").hover(function(){var t=$(this);if(!t.hasClass("frozen")&&0==$(".frozen").length){var e=t.position();t.data({top:e.top,left:e.left,height:t.outerHeight(),width:t.outerWidth()}).addClass("hover").stop().animate({top:"-12%",left:"-10%",height:"124%",width:"120%"},100)}},function(){$(this).hasClass("frozen")||$(this).removeClass("hover").stop().animate({top:"0",left:"0",height:"100%",width:"100%"},100)}),$(".brick").click(function(){if(!EPuzz.isOn){var t=$(this);window.location.href="#"+t.data("href")}}),$(window).on("keydown",function(t){27==t.which&&(window.location.hash="#content"),40==t.which&&0==$(document).scrollTop()&&(t.preventDefault(),window.location.hash||(window.location.hash="#content"),scrollToContent())}),$(".circle").click(function(){var t=$(this).parent();return $(".event-active .desc").stop().fadeOut(),$(".event-active .event-sub-list").stop().fadeOut(function(){$(".event-sub-list").css("left","auto")}),t.is(".event-active")?void $(".event-active").removeClass("event-active"):($(".event-active").removeClass("event-active"),void t.addClass("event-active").find(".event-sub-list").slideDown(300,function(){var t=$(this);t.css({left:t.position().left+"px"}).stop().animate({left:0},300,function(){var t=$(this),e=$(this).parent().find(".desc");e.css({top:t.position().top,left:"0",width:"0",display:"block"});var i=t.offsetParent().innerWidth()-t.outerWidth();t.stop().animate({left:i+"px"}),e.stop().animate({"min-height":t.height()+"px",width:i+-10+"px"})})}))}),$(".brick").append($("<div>").html("âœ˜").attr("title","Close").addClass("cross").on("click",function(t){return window.location.hash="#content",t.stopPropagation(),!1}))}),$(document).ready(function(){$(".cal-table td.has-event").click(function(){$this=$(this),date=$this.closest("table").data("month")+"-"+$this.text(),dateInList=$(".sched-list-"+date),dateInList.length&&$("body").animate({scrollTop:dateInList.offset().top-$(".navbar").outerHeight()},500)})});var Gallery=new function(){var t,e,i,n,s,o,a,c,r=baseUrl,l=0,h=0,d=!1,f=GLobalImagesArray;$(function(){t=$(window),e=$(document),i=$("#gallery-ref"),n=$("#gallery-container"),s=$(".gallery .thumb-container"),o=s.find(".col1"),a=s.find(".col2")});var p=function(){d||(d=!0,$.each(f,u))},u=function(t,e){var i=new Image;i.src=r+"img/gallery_thumbs/"+e,i.alt="gallery thumbnail",i.onload=g},g=function(){if(!n.find("img").attr("src"))try{var t=location.search.replace("?","");-1!=f.indexOf(t+".jpg")?n.find("img").attr("src",r+"img/gallery/"+t+".jpg"):n.find("img").attr("src",this.src.replace("gallery_thumbs","gallery"))}catch(e){n.find("img").attr("src",this.src.replace("gallery_thumbs","gallery"))}h>=l?l+=o.append($(this).addClass("thumb").click(v)).height():h+=a.append($(this).addClass("thumb").click(v)).height()},v=function(){var t=new Image;t.src=this.src.replace("gallery_thumbs","gallery"),t.onload=function(){$("#large-image img").attr("src",this.src)}},w=function(){if(t.width()<=600)return void n.hide();n.show();var e=i.offset(),s=t.height()-c-10;n.css("fixed"==n.css("position")?{left:e.left,width:i.width(),height:s+"px"}:{top:e.top,left:e.left,width:i.width(),height:s+"px"})},m=function(){t.width()<=600||(n.show(),e.scrollTop()>=$(window).height()-$(".navbar").outerHeight()?n.css({position:"fixed",top:c+"px"}):(n.css({position:"absolute"}),w()))};this.view=function(){p(),t.on("resize",w),e.on("scroll",m),t.width()<=600||(c=i.offset().top-t.height()+$(".navbar").outerHeight(),w(),m(),n.show(),n.hide(),n.fadeIn(300))},this.close=function(){n.hide(),t.off("resize",w),e.off("scroll",m)}},Lazy=new function(){this.load=function(t){$('.brick[data-href="'+t+'"]').find("img[data-src]").each(function(){$(this).attr("src",$(this).data("src")).removeAttr("data-src")})}},E2Egg=new function(){var t;this.setup=function(e){t=e,$(".api-c").prepend($("<img>").addClass("api-i").attr("src",baseUrl+"img/red-egg.png")),$(".api-e").one("click",function(){$(".api-i").css({"max-width":$(".api-e").width()+"px",display:"inline-block"});var e=$(this);e.css({transform:"scale(0)",opacity:"0"}),setTimeout(function(){$(".api-i").css({transform:"scale(1) rotate(720deg)",opacity:"1"}),Easter.next(t)},500)})},this.complete=function(){$(".api-c").prepend($("<img>").addClass("api-i").attr("src",baseUrl+"img/red-egg.png").css("transition","none").css({transform:"scale(1) rotate(0deg)",opacity:"1",display:"inline-block"})),$(".api-e").css({visibility:"hidden",opacity:"0"})},this.hint='Easter begins with a big "e"!'};EEvent=new function(){var t,e='<li class="sched-date sched-list-Apr-5"><div>5 April</div><ul class="sched-events"><li class="sched-item">      <a href="javascript:void(0)" onclick="EEvent.gotIt()">        <div class="sched-item-head">Easter egg hunt</div>      </a>    </li></ul></li>',i=!1;this.gotIt=function(){i||(i=!0,Easter.next(t))},this.setup=function(i){t=i,$(".sched-list").append(e)},this.complete=function(){i=!0,$(".sched-list").append(e)},this.hint="Obviously, we scheduled this."},EPuzz=new function(){var t;this.isOn=!1,this.hint="Remember jigsaw puzzles? There's one here too.",this.setup=function(e){function i(){$this=$(this),$this.find(".brick.frozen").length||(0==$this.parents().find(".flip").length&&$(".bricks-container").css({background:"url("+baseUrl+"img/easter_eggs.jpg) no-repeat",backgroundSize:"contain",backgroundPosition:"center"}),$this.addClass("flip"),8==$this.parent().find(".flip").length&&(Easter.next(t),window.setTimeout(function(){$(".grid-cell").off("click",i),$(".grid-cell").removeClass("flip"),EPuzz.isOn=!1,$(".bricks-container").css({background:"",backgroundSize:"",backgroundPosition:""})},1500)))}t=e,this.isOn=!0,$(".grid-cell").on("click",i)},this.complete=function(){this.isOn=!1}};